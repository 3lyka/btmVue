{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives, createBlock as _createBlock } from \"vue\";\nimport _imports_0 from '@/assets/img/oil.svg';\nconst _hoisted_1 = {\n  class: \"lot-detail\"\n};\nconst _hoisted_2 = {\n  class: \"lot-detail__box\"\n};\nconst _hoisted_3 = {\n  class: \"lot-detail__title\"\n};\nconst _hoisted_4 = {\n  class: \"lot-detail__title-wrapper\"\n};\nconst _hoisted_5 = {\n  class: \"lot-detail__title-id\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"lot-detail__title-img\",\n  src: _imports_0\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"lot-detail__title-shipment\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"lot-detail__title-shipment-text\"\n}, \"Отгрузка\", -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = {\n  key: 0,\n  class: \"lot-detail__title-shipment-date\"\n};\nconst _hoisted_10 = {\n  class: \"lot-detail__description\"\n};\nconst _hoisted_11 = {\n  key: 0,\n  class: \"lot-detail__description-name\"\n};\nconst _hoisted_12 = {\n  key: 1,\n  class: \"lot-detail__description-mark\"\n};\n\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"lot-detail__description-create\"\n}, \"Выставлено\", -1\n/* HOISTED */\n);\n\nconst _hoisted_14 = {\n  key: 2,\n  class: \"lot-detail__description-count-weight\"\n};\nconst _hoisted_15 = {\n  class: \"lot-detail__description-box\"\n};\nconst _hoisted_16 = {\n  class: \"lot-detail__description-receipt\"\n};\nconst _hoisted_17 = {\n  class: \"lot-detail__description-receipt-title\"\n};\nconst _hoisted_18 = {\n  class: \"lot-detail__description-receipt-count-weight\"\n};\nconst _hoisted_19 = {\n  class: \"lot-detail__description-receipt\"\n};\n\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"lot-detail__description-receipt-title\"\n}, \"Предложений\", -1\n/* HOISTED */\n);\n\nconst _hoisted_21 = {\n  class: \"lot-detail__description-receipt-count\"\n};\nconst _hoisted_22 = {\n  class: \"lot-detail__info\"\n};\n\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"lot-detail__info-title\"\n}, \"Цена по прейскуранту\", -1\n/* HOISTED */\n);\n\nconst _hoisted_24 = {\n  class: \"lot-detail__info-region\"\n};\nconst _hoisted_25 = {\n  class: \"lot-detail__info-region-price\"\n};\nconst _hoisted_26 = {\n  key: 1\n};\n\nconst _hoisted_27 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"lot-detail__info-comment\"\n}, \"Комментарий\", -1\n/* HOISTED */\n);\n\nconst _hoisted_28 = {\n  class: \"lot-detail__info-comment-text\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_LotDetailSale = _resolveComponent(\"LotDetailSale\");\n\n  const _component_LotDetailConfirmUmiop = _resolveComponent(\"LotDetailConfirmUmiop\");\n\n  const _component_LotDetailRegion = _resolveComponent(\"LotDetailRegion\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"p\", _hoisted_5, \"№\" + _toDisplayString($options.prettify(_ctx.lot.id)), 1\n  /* TEXT */\n  ), _hoisted_6]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _ctx.lot.shippingDate ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString(_ctx.lot.shippingDate), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_10, [_ctx.lot.factory.name ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _toDisplayString(_ctx.lot.factory.name), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true), _ctx.lot.product.name ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, _toDisplayString(_ctx.lot.product.name), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true), _hoisted_13, _ctx.lot.weight ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, _toDisplayString($options.prettify(_ctx.lot.weight)) + \" т \", 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, _toDisplayString($options.getReceipt.title), 1\n  /* TEXT */\n  ), _createElementVNode(\"div\", _hoisted_18, _toDisplayString($options.prettify($options.getReceipt.weight)) + \" т \", 1\n  /* TEXT */\n  )]), _createElementVNode(\"div\", _hoisted_19, [_hoisted_20, _createElementVNode(\"div\", _hoisted_21, _toDisplayString($options.getCountContractor), 1\n  /* TEXT */\n  )])])]), _createVNode(_component_LotDetailSale, {\n    status: _ctx.lot.status,\n    resoldInLot: _ctx.lot.resoldInLot,\n    countWeightSale: $options.countWeightSale\n  }, null, 8\n  /* PROPS */\n  , [\"status\", \"resoldInLot\", \"countWeightSale\"]), _createElementVNode(\"div\", _hoisted_22, [_hoisted_23, _createElementVNode(\"div\", _hoisted_24, [_createCommentVNode(\" {{lot.factory.shortName}} \"), _createElementVNode(\"span\", _hoisted_25, _toDisplayString(_ctx.lot.priceMin ? $options.prettify(_ctx.lot.priceMin) + ' ₽' : ''), 1\n  /* TEXT */\n  )]), _ctx.isTrader ? _withDirectives((_openBlock(), _createBlock(_component_LotDetailConfirmUmiop, {\n    key: 0,\n    offerList: _ctx.offerList,\n    umiop: _ctx.umiop,\n    lot: _ctx.lot\n  }, null, 8\n  /* PROPS */\n  , [\"offerList\", \"umiop\", \"lot\"])), [[_vShow, _ctx.umiop.showUmiop]]) : _createCommentVNode(\"v-if\", true), _createVNode(_component_LotDetailRegion, {\n    regions: _ctx.lot.regions\n  }, null, 8\n  /* PROPS */\n  , [\"regions\"]), _ctx.lot.comment ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, [_hoisted_27, _createElementVNode(\"div\", _hoisted_28, _toDisplayString(_ctx.lot.comment), 1\n  /* TEXT */\n  )])) : _createCommentVNode(\"v-if\", true)])])]);\n}","map":{"version":3,"mappings":"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","names":["_imports_0","class","_createElementVNode","src","_createElementBlock","_toDisplayString","$options","_ctx","id","_hoisted_6","_hoisted_8","shippingDate","factory","name","product","_hoisted_13","weight","title","_hoisted_20","_createVNode","_component_LotDetailSale","status","resoldInLot","countWeightSale","_hoisted_23","_createCommentVNode","priceMin","_createBlock","_component_LotDetailConfirmUmiop","offerList","umiop","lot","showUmiop","_component_LotDetailRegion","regions","comment","_hoisted_26","_hoisted_27"],"sourceRoot":"","sources":["C:\\openserver\\domains\\U190001472_BitumMap_Vue\\src\\components\\views\\trading-session\\lot\\LotDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"lot-detail\">\r\n    <div class=\"lot-detail__box\">\r\n      <div class=\"lot-detail__title\">\r\n        <div class=\"lot-detail__title-wrapper\">\r\n          <p class=\"lot-detail__title-id\">№{{ prettify(lot.id) }}</p>\r\n          <img class=\"lot-detail__title-img\" src=\"@/assets/img/oil.svg\" />\r\n        </div>\r\n        <div class=\"lot-detail__title-shipment\">\r\n          <div class=\"lot-detail__title-shipment-text\">Отгрузка</div>\r\n          <div v-if=\"lot.shippingDate\" class=\"lot-detail__title-shipment-date\">\r\n            {{ lot.shippingDate }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"lot-detail__description\">\r\n        <div v-if=\"lot.factory.name\" class=\"lot-detail__description-name\">\r\n          {{ lot.factory.name }}\r\n        </div>\r\n        <div v-if=\"lot.product.name\" class=\"lot-detail__description-mark\">\r\n          {{ lot.product.name }}\r\n        </div>\r\n        <div class=\"lot-detail__description-create\">Выставлено</div>\r\n        <div v-if=\"lot.weight\" class=\"lot-detail__description-count-weight\">\r\n          {{ prettify(lot.weight) }} т\r\n        </div>\r\n        <div class=\"lot-detail__description-box\">\r\n          <div class=\"lot-detail__description-receipt\">\r\n            <div class=\"lot-detail__description-receipt-title\">\r\n              {{ getReceipt.title }}\r\n            </div>\r\n            <div class=\"lot-detail__description-receipt-count-weight\">\r\n              {{ prettify(getReceipt.weight) }} т\r\n            </div>\r\n          </div>\r\n          <div class=\"lot-detail__description-receipt\">\r\n            <div class=\"lot-detail__description-receipt-title\">Предложений</div>\r\n            <div class=\"lot-detail__description-receipt-count\">\r\n              {{ getCountContractor }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <LotDetailSale\r\n        :status=\"lot.status\"\r\n        :resoldInLot=\"lot.resoldInLot\"\r\n        :countWeightSale=\"countWeightSale\"\r\n      />\r\n      <div class=\"lot-detail__info\">\r\n        <div class=\"lot-detail__info-title\">Цена по прейскуранту</div>\r\n        <div class=\"lot-detail__info-region\">\r\n          <!-- {{lot.factory.shortName}} -->\r\n          <span class=\"lot-detail__info-region-price\">{{\r\n            lot.priceMin ? prettify(lot.priceMin) + ' ₽' : ''\r\n          }}</span>\r\n        </div>\r\n        <LotDetailConfirmUmiop\r\n          v-if=\"isTrader\"\r\n          v-show=\"umiop.showUmiop\"\r\n          :offerList=\"offerList\"\r\n          :umiop=\"umiop\"\r\n          :lot=\"lot\"\r\n        />\r\n        <LotDetailRegion :regions=\"lot.regions\" />\r\n        <div v-if=\"lot.comment\">\r\n          <div class=\"lot-detail__info-comment\">Комментарий</div>\r\n          <div class=\"lot-detail__info-comment-text\">{{ lot.comment }}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapGetters } from 'vuex';\r\nimport LotDetailConfirmUmiop from '@/components/views/trading-session/lot/LotDetailConfirmUmiop';\r\nimport LotDetailSale from '@/components/views/trading-session/lot/LotDetailSale';\r\nimport LotDetailRegion from '@/components/views/trading-session/lot/LotDetailRegion';\r\nimport { prettify } from '@/utils/helpers/prettify';\r\nimport { useUserStore } from '@/stores/user';\r\nimport { mapState as mapStatePinia } from 'pinia';\r\n\r\nexport default {\r\n  name: 'LotDetail',\r\n  components: { LotDetailRegion, LotDetailSale, LotDetailConfirmUmiop },\r\n  computed: {\r\n    ...mapState({\r\n      lot: (state) => state.lot.lot,\r\n      umiop: (state) => state.offer.umiop,\r\n    }),\r\n    ...mapStatePinia(useUserStore, ['isTrader', 'isUmiop']),\r\n    ...mapGetters({\r\n      offerList: 'offer/offerListWithEdited',\r\n    }),\r\n    getCountContractor() {\r\n      let offersAgreed = this.offerList.filter(\r\n        (offer) =>\r\n          offer.switchAccepted === true || offer.status.code === 'umiop_done'\r\n      ).length;\r\n      const offersNoAgreed = this.offerList.length;\r\n\r\n      if (\r\n        this.lot.status.code === 'receiving' ||\r\n        this.lot.status.code === 'waiting'\r\n      ) {\r\n        offersAgreed = 0;\r\n      }\r\n\r\n      return offersAgreed + '/' + offersNoAgreed;\r\n    },\r\n    countWeightSale() {\r\n      const offersAgreed = this.offerList.filter(\r\n        (offer) =>\r\n          offer.switchAccepted === true || offer.status.code === 'umiop_done'\r\n      );\r\n      return offersAgreed.reduce((total, offer) => total + offer.weightSale, 0);\r\n    },\r\n    getReceipt() {\r\n      const res = {};\r\n      res.title = 'Распределено';\r\n      if (\r\n        this.lot.status.code === 'completed' ||\r\n        this.lot.status.code === 'cancelled'\r\n      ) {\r\n        res.title = 'Продано';\r\n      }\r\n\r\n      if (\r\n        this.lot.status.code === 'receiving' ||\r\n        this.lot.status.code === 'waiting'\r\n      ) {\r\n        res.weight = 0; //todo уточнить\r\n      } else if (this.lot.status.code === 'cancelled') {\r\n        res.weight = 0; //todo уточнить\r\n      } else if (this.lot.status.code === 'completed') {\r\n        res.weight = this.countWeightSale;\r\n      } else {\r\n        res.weight = this.countWeightSale;\r\n      }\r\n\r\n      return res;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    prettify,\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"]},"metadata":{},"sourceType":"module"}